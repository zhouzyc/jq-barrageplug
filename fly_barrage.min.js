/**
 * Created by fly on 17/7/26.
 */
(function(a){a.fn.flyBarrage=function(b){return new FlyBarrage(this,b)}})(window.jQuery);function FlyBarrage(b,a){this.options=a;this._this=b;this._init()}FlyBarrage.prototype={_super_number:0,_opts:{top:"0",left:"0",right:"0",bottom:"0",width:"100%",height:"50%",background:"rgba(0,0,0,0.5)",data:["111","33333"],paddingNumber:30,sleep:20,pattern:"random",sequenceSpaceTime:4000,tops:[{"top":1},{"top":36},{"top":71},{"top":106}],loopNumber:false},_init:function(){var d=this;d._defaluts();d._super_number=0;d._this.append(d._flyBoxHtml());d._flyEchoBarrage(d._opts.data);if(d._opts.pattern=="sequence"){var c=$(".fly-barrage-box").width();var a=$(".fly-barrage-box").height();var b=parseInt(Math.random()*10,10)+parseInt(Math.random()*50,10);var e=d._opts.tops.length;setInterval(function(){for(var g=0;g<e;g++){var f=$(".fly_box_"+g+":last");f.removeClass("fly_box_"+g);f.animate({left:-100},{"duration":(1000*d._opts.sleep),"easing":"linear","queue":"fx","complete":function(){var h=$(this);if(d._opts.loopNumber){if(h.index()+1>d._opts.loopNumber){h.remove()}else{h.remove();$(".fly-barrage-box").prepend(d._loopMsg(h))}}else{h.remove()}}})}},d._opts.sequenceSpaceTime)}},_defaluts:function(){var a=$.extend(this._opts,this.options||{});this.opts=a;return a},_flyBoxHtml:function(){var a="";a+="<div class='fly-barrage-box' style='position: fixed;z-index: 9999;width: "+this.opts.width+";height: "+this.opts.height+";background: "+this.opts.background+";top: "+this.opts.top+";bottom: "+this.opts.bottom+";right: "+this.opts.right+";left: "+this.opts.left+";'>"+"</div>";return a},_flyEchoBarrage:function(d){var e=this;var c=d.length;for(var b=0;b<c;b++){var a="<div class='fly-barrage' data-top=''></div>";var f=$(a);f.html(d[b]);f=e._loopMsg(f);$(".fly-barrage-box").prepend(f)}},_loopMsg:function(c){var e=this;var a=$(".fly-barrage-box").width();var i=$(".fly-barrage-box").height();if(e._opts.pattern=="random"){var f=parseInt(Math.random()*10,10)+parseInt(Math.random()*i,10);if(f>(i-e._opts.paddingNumber)){f=i-e._opts.paddingNumber-parseInt(Math.random()*50,10)}if(f<e._opts.paddingNumber){f=e._opts.paddingNumber+parseInt(Math.random()*50,10)}var h=parseInt(Math.random()*10,10)+parseInt(Math.random()*a,10);var d=parseInt(Math.random()*6,10);c.css({"position":"absolute","white-space":"nowrap","z-index":"99999","top":f+"px","right":"-"+h+"px"});c.animate({right:a+h},{"duration":(1000*e._opts.sleep+h*d),"easing":"linear","queue":"fx","complete":function(){var j=$(this);if(e._opts.loopNumber){if(j.index()+1>e._opts.loopNumber){j.remove()}else{e._loopMsg(j)}}else{j.remove()}},"step":function(k){var j=$(this);if(!e._opts.loopNumber){if(k>a+10){j.remove()}}}})}else{var b=e._opts.tops.length;var f=e._opts.tops[e._super_number].top;var g=parseInt(Math.random()*10,10)+parseInt(Math.random()*a,10);a=a+g;c.addClass("fly_box_"+e._super_number);c.data("top",e._super_number);c.css({"position":"absolute","white-space":"nowrap","z-index":"99999","top":f+"px","left":a+"px"});e._super_number++;if(e._super_number>=b){e._super_number=0}}return c}};